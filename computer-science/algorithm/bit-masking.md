# Bit Masking

#### ì •ìˆ˜ì˜ ì´ì§„ìˆ˜ í‘œí˜„ì„ í™œìš©í•˜ì—¬ ì§‘í•©ì„ í‘œí˜„í•˜ëŠ” ê¸°ë²•

> ğŸ’¡**ë¹„íŠ¸ë§ˆìŠ¤í‚¹ì˜ ì¥ì **
>
> 1. ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±: Nê°œì˜ ì›ì†Œë¥¼ í‘œí˜„í•˜ëŠ”ë° ë‹¨ í•˜ë‚˜ì˜ ì •ìˆ˜ë§Œ í•„ìš”
> 2. ì—°ì‚° ì†ë„: ë¹„íŠ¸ ì—°ì‚°ì€ ë§¤ìš° ë¹ ë¦„
> 3. ì½”ë“œ ê°„ê²°ì„±: ì§‘í•© ì—°ì‚°ì„ ë¹„íŠ¸ ì—°ì‚°ìœ¼ë¡œ ê°„ë‹¨íˆ í‘œí˜„ ê°€ëŠ¥
>
> 
>
> ğŸ’¡**ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°**
>
> 1. ë¶€ë¶„ì§‘í•© ìƒì„±
> 2. ìƒíƒœ í‘œí˜„ (DP ë¬¸ì œì—ì„œ ìì£¼ ì‚¬ìš©)
> 3. ë°©ë¬¸ ì²´í¬
> 4. í”Œë˜ê·¸/ì˜µì…˜ ê´€ë¦¬
>
> 
>
> **ğŸ’¡ì‹œê°„ë³µì¡ë„**
>
> - ë¹„íŠ¸ ì—°ì‚°: O(1)
> - Nê°œ ì›ì†Œì˜ ëª¨ë“  ë¶€ë¶„ì§‘í•© ìƒì„±: O(2^N)





### 1. ê¸°ë³¸ ë¹„íŠ¸ ë§ˆìŠ¤í¬ ì—°ì‚°ì

```cpp
#include <iostream>
using namespace std;

// ê¸°ë³¸ì ì¸ ë¹„íŠ¸ ì—°ì‚°ì
// & (AND), | (OR), ^ (XOR), ~ (NOT), << (left shift), >> (right shift)
// shift = aì˜ ëª¨ë“  ë¹„íŠ¸ë¥¼ ì™¼ìª½ / ì˜¤ë¥¸ìª½ìœ¼ë¡œ bì¹¸ ë§Œí¼ ì´ë™

// 1      = 00000001  (1)
// 1 << 1 = 00000010  (2)
// 1 << 2 = 00000100  (4)
// 1 << 3 = 00001000  (8)
// 1 << 4 = 00010000  (16)

void bitOperations() {
    // ë¹„íŠ¸ ì§‘í•© í‘œí˜„
    int state = 0;              // ê³µì§‘í•© 
    cout << bitset<8>(state) << endl; //[0000 0000]
    
    // ì›ì†Œ ì¶”ê°€ (ië²ˆì§¸ ë¹„íŠ¸ë¥¼ 1ë¡œ)
    int i = 3;
    state |= (1 << i);         // 3ë²ˆì§¸ ë¹„íŠ¸ ì¼œê¸°
    cout << bitset<8>(state) << endl; // [0000 1000]
    
    // ì›ì†Œ ì œê±°
    state &= ~(1 << i);        // 3ë²ˆì§¸ ë¹„íŠ¸ ë„ê¸° 
    cout << bitset<8>(state) << endl; //[0000 0000]
    
    // ì›ì†Œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    if (state & (1 << i))
        cout << i << endl;
    else
        cout << i << endl; // [3]
        
    // ì›ì†Œ í† ê¸€ (0->1, 1->0)
    state ^= (1 << i);
    cout << bitset<8>(state) << endl; //[0000 1000]
    
    // ê°€ì¥ ë‚®ì€ ì¼œì ¸ìˆëŠ” ë¹„íŠ¸ ì°¾ê¸°
    int lowest_bit = (state & -state);
    cout << bitset<8>(lowest_bit) << endl; //[0000 1000]
    
    // ì „ì²´ ì§‘í•©
    int n = 4;
    int full = (1 << n) - 1;   // nê°œì˜ ë¹„íŠ¸ê°€ ëª¨ë‘ 1ì¸ ìˆ˜
    cout << bitset<8>(full) << endl; // [0000 1111]
}
```



### 2. ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¹„íŠ¸ ì—°ì‚°ì

```cpp
// 1. 2ì˜ ê±°ë“­ì œê³± ì²´í¬
bool isPowerOfTwo(int n) {
    return n && !(n & (n-1));
}

// 2. ì¼œì ¸ìˆëŠ” ë¹„íŠ¸ ìˆ˜ ì„¸ê¸°
int countBits(int n) {
    int count = 0;
    while(n) {
        count += n & 1;
        n >>= 1;
    }
    return count;
    // ë˜ëŠ” ë‚´ì¥ í•¨ìˆ˜ ì‚¬ìš©: __builtin_popcount(n)
}

// 3. ìµœí•˜ìœ„ ë¹„íŠ¸ ë„ê¸°
n &= (n-1);

// 4. ìµœí•˜ìœ„ ë¹„íŠ¸ ê°’ êµ¬í•˜ê¸°
int lowest_bit = n & -n;
```



### 3. ì‹œê°í™”

### ADD ì—°ì‚° (OR ì‚¬ìš©)
```
ì˜ˆì‹œ: 3ì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ (1 << 2)

í˜„ì¬ ìƒíƒœ:    0000
1 << 2:       0100  (3ë²ˆì§¸ ë¹„íŠ¸ë¥¼ 1ë¡œ)
OR ì—°ì‚°(|):   0100  (ê²°ê³¼)
```

OR(|)ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ :
- ë‹¤ë¥¸ ë¹„íŠ¸ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ
- ì›í•˜ëŠ” ìœ„ì¹˜ë§Œ 1ë¡œ ì„¤ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸
- **ì´ë¯¸ 1ì´ì–´ë„ 1ì´ ìœ ì§€ë¨ (ì¤‘ë³µ ì¶”ê°€ ë°©ì§€)**

### REMOVE ì—°ì‚° (&~)
```
ì˜ˆì‹œ: 3ì„ ì œê±°í•˜ê³  ì‹¶ì„ ë•Œ (~(1 << 2))

1 << 2:       0100
~ ì—°ì‚°:       1011  (ë¹„íŠ¸ ë°˜ì „)
í˜„ì¬ ìƒíƒœ:    0100
AND ì—°ì‚°(&):  0000  (ê²°ê³¼)
```

&~ ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ :
- ~ ë¡œ í•´ë‹¹ ë¹„íŠ¸ë§Œ 0ì´ê³  ë‚˜ë¨¸ì§€ëŠ” 1ì¸ íŒ¨í„´ì„ ë§Œë“¤ê³ 
- AND(&)ë¡œ í•´ë‹¹ ìœ„ì¹˜ë§Œ 0ìœ¼ë¡œ ë§Œë“¤ê³  ë‚˜ë¨¸ì§€ëŠ” ìœ ì§€
- **ì´ë¯¸ 0ì´ì–´ë„ 0ì´ ìœ ì§€ë¨ (ì¤‘ë³µ ì œê±° ë°©ì§€)**

ê°ê°ì˜ ì—°ì‚°ì„ ë‹¨ê³„ë³„ë¡œ ì‹œê°í™”í•´ì„œ ì„¤ëª…í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤:

###  ì›ì†Œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ (state & (1 << i))
```
ì˜ˆì‹œ: i=3ì¼ ë•Œ

í˜„ì¬ state:   0000 1000
1 << 3:       0000 1000
AND ì—°ì‚°(&):  0000 1000  (0ì´ ì•„ë‹ˆë©´ ì¡´ì¬, 0ì´ë©´ ì—†ìŒ)
```
- AND ì—°ì‚°ìœ¼ë¡œ í•´ë‹¹ ìœ„ì¹˜ì˜ ë¹„íŠ¸ë§Œ í™•ì¸
- ê²°ê³¼ê°€ 0ì´ ì•„ë‹ˆë©´ í•´ë‹¹ ìœ„ì¹˜ì˜ ë¹„íŠ¸ê°€ 1
- ê²°ê³¼ê°€ 0ì´ë©´ í•´ë‹¹ ìœ„ì¹˜ì˜ ë¹„íŠ¸ê°€ 0

### í† ê¸€ ì—°ì‚° (state ^= (1 << i))
```
ì˜ˆì‹œ: i=3ì¼ ë•Œ

í˜„ì¬ state:   0000 1000
1 << 3:       0000 1000
XOR ì—°ì‚°(^):  0000 0000  (ê°™ìœ¼ë©´ 0, ë‹¤ë¥´ë©´ 1)
```
- XORì˜ íŠ¹ì„±: ê°™ì€ ë¹„íŠ¸ë©´ 0, ë‹¤ë¥¸ ë¹„íŠ¸ë©´ 1
- 1ì´ë©´ 0ìœ¼ë¡œ, 0ì´ë©´ 1ë¡œ ë°”ê¿”ì¤Œ

### ê°€ì¥ ë‚®ì€ ì¼œì§„ ë¹„íŠ¸ ì°¾ê¸° (state & -state)
```
state:        0000 1000
-state:       1111 1000 (2ì˜ ë³´ìˆ˜: ë¹„íŠ¸ ë°˜ì „ í›„ +1)
AND ì—°ì‚°(&):  0000 1000
```
- ìŒìˆ˜ëŠ” 2ì˜ ë³´ìˆ˜ë¡œ í‘œí˜„ (ëª¨ë“  ë¹„íŠ¸ ë°˜ì „ í›„ +1)
- AND ì—°ì‚°í•˜ë©´ ìµœí•˜ìœ„ 1ë¹„íŠ¸ë§Œ ë‚¨ìŒ

### ì „ì²´ ì§‘í•© ((1 << n) - 1)
```
n=4ì¼ ë•Œ:
1 << 4:       0001 0000
-1:           0000 1111  (ê²°ê³¼)
```
- 1ì„ në§Œí¼ ì™¼ìª½ìœ¼ë¡œ ì‹œí”„íŠ¸í•˜ë©´ n+1ë²ˆì§¸ ë¹„íŠ¸ë§Œ 1
- ì—¬ê¸°ì„œ 1ì„ ë¹¼ë©´ nê°œì˜ ë¹„íŠ¸ê°€ ëª¨ë‘ 1ì´ ë¨